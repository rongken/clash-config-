enable_rule_generator=true
overwrite_original_rules=true

# åŸºç¡€è®¾ç½®
exclude_remarks=(Data Left|Remain:|Traffic:|Expir[ey]|Reset|^\d[\d.]*\s*[MG]B(?![A-Za-z])|[:ï¼š]\s*\d[\d.]*\s*GB(?![A-Za-z])|å‰©[ä½™é¤˜]æµé‡|æµé‡[ï¼š:]|[åˆ°è¿‡éæ•ˆ]æœŸ|[æ—¶æ™‚][é—´é–“]|é‡ç½®|åˆ†å‰²çº¿|æ®‹ã‚Šä½¿ç”¨å®¹é‡|æœ‰åŠ¹æœŸé™|ãƒªã‚»ãƒƒãƒˆ|ğŸ”°\s*(ID|HSD|SNI):|ğŸ“\s*GÃ³i:|æµ‹è¯•|ä¸´æ—¶|å¤‡ç”¨)

ruleset=å›½å†…,[]GEOSITE,private
ruleset=å›½å†…,[]GEOIP,private,no-resolve
ruleset=å›½å†…,https://raw.githubusercontent.com/rongken/clash-config-/refs/heads/main/Direct.list
ruleset=å›½å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Direct/Direct.list
ruleset=å›½å†…,[]GEOSITE,google-cn
ruleset=å›½å†…,[]GEOSITE,category-games@cn
ruleset=å›½å†…,https://raw.githubusercontent.com/Aethersailor/Custom_OpenClash_Rules/main/rule/Steam_CDN.list
ruleset=å›½å†…,[]GEOSITE,category-game-platforms-download
ruleset=å›½å†…,[]GEOSITE,category-public-tracker
ruleset=TikTok,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/TikTok/TikTok.list
ruleset=æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list
ruleset=æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list
ruleset=æµåª’ä½“,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list
ruleset=æµåª’ä½“,https://raw.githubusercontent.com/rongken/ios_rule_script/master/rule/Clash/HBO/HBO.list
ruleset=å›½å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Apple/Apple.list
ruleset=å›½å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/China/China.list
ruleset=å›½å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaIPs/ChinaIPs.list
ruleset=å›½å†…,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/ChinaMedia/ChinaMedia.list
ruleset=å›½å†…,[]GEOSITE,cn
ruleset=å›½å†…,[]GEOIP,cn,no-resolve
ruleset=å›½å¤–,[]FINAL


custom_proxy_group=AI`select`[]æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`[]é¦™æ¸¯-è‡ªåŠ¨`[]å°æ¹¾-è‡ªåŠ¨`[]æ—¥æœ¬-è‡ªåŠ¨`[]æ–°åŠ å¡-è‡ªåŠ¨`[]éŸ©å›½-è‡ªåŠ¨`[]ç¾å›½-è‡ªåŠ¨`[]æ‰‹åŠ¨èŠ‚ç‚¹
custom_proxy_group=TikTok`select`[]æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`[]é¦™æ¸¯-è‡ªåŠ¨`[]å°æ¹¾-è‡ªåŠ¨`[]æ—¥æœ¬-è‡ªåŠ¨`[]æ–°åŠ å¡-è‡ªåŠ¨`[]éŸ©å›½-è‡ªåŠ¨`[]ç¾å›½-è‡ªåŠ¨`[]æ‰‹åŠ¨èŠ‚ç‚¹
custom_proxy_group=æµåª’ä½“`select`[]æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`[]é¦™æ¸¯-è‡ªåŠ¨`[]å°æ¹¾-è‡ªåŠ¨`[]æ—¥æœ¬-è‡ªåŠ¨`[]æ–°åŠ å¡-è‡ªåŠ¨`[]éŸ©å›½-è‡ªåŠ¨`[]ç¾å›½-è‡ªåŠ¨`[]æ‰‹åŠ¨èŠ‚ç‚¹
custom_proxy_group=å›½å¤–`select`[]æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`[]é¦™æ¸¯-è‡ªåŠ¨`[]å°æ¹¾-è‡ªåŠ¨`[]æ—¥æœ¬-è‡ªåŠ¨`[]æ–°åŠ å¡-è‡ªåŠ¨`[]éŸ©å›½-è‡ªåŠ¨`[]ç¾å›½-è‡ªåŠ¨`[]æ‰‹åŠ¨èŠ‚ç‚¹
custom_proxy_group=å›½å†…`select`[]DIRECT`[]æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`[]æ‰‹åŠ¨èŠ‚ç‚¹

custom_proxy_group=æ‰‹åŠ¨èŠ‚ç‚¹`select`.*
custom_proxy_group=æ‰€æœ‰åœ°åŒº-è‡ªåŠ¨`url-test`.*`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=é¦™æ¸¯-è‡ªåŠ¨`url-test`(é¦™æ¸¯|HK|Hong Kong)`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=å°æ¹¾-è‡ªåŠ¨`url-test`(å°æ¹¾|TW|Taiwan)`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=æ—¥æœ¬-è‡ªåŠ¨`url-test`(æ—¥æœ¬|JP|ä¸œäº¬|å¤§é˜ª)`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=æ–°åŠ å¡-è‡ªåŠ¨`url-test`(æ–°åŠ å¡|SG|Singapore)`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=éŸ©å›½-è‡ªåŠ¨`url-test`(éŸ©å›½|KR|Korea)`https://www.gstatic.com/generate_204`30,200
custom_proxy_group=ç¾å›½-è‡ªåŠ¨`url-test`(ç¾å›½|US|United States)`https://www.gstatic.com/generate_204`30,200

# TUN é…ç½®ä¼˜åŒ–
tun:
  enable: true
  stack: gvisor
  dns-hijack:
    - udp://0.0.0.0:53
    - tcp://0.0.0.0:53
  auto-route: true
  auto-detect-interface: true
  mtu: 1350
  strict-route: true
  endpoint-independent-nat: true
  include-uid-range: [1000-65535]

# DNSé…ç½®
dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*.lan'
    - 'localhost.ptlogin2.qq.com'
    - '+.stun.*'
    - '+.msftncsi.com'
    - '+.ntp.org.cn'
    - '+.pool.ntp.org'
    - '+.(cmpassport.com|10010.com|189.cn)'
  nameserver:
    - 223.6.6.6
    - https://dns.alidns.com/dns-query
  fallback:
    - https://1.12.12.12/dns-query
    - https://dns.google/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 127.0.0.0/8
      - 169.254.0.0/16
      - 192.0.0.0/24
  nameserver-policy:
    '+.bilibili.com': 223.6.6.6
    '+.(taobao.com|tmall.com|alipay.com|alicdn.com|aliyun.com)': 223.6.6.6
    '+.(qq.com|tencent.com|weixin.com|wechat.com|weiyun.com)': 223.6.6.6
    '+.cn': 223.6.6.6
    '+.(google.com|youtube.com|github.com|facebook.com|x.com|instagram.com|netflix.com|discord.com|reddit.com|tiktok.com)': https://1.12.12.12/dns-query
  caching: true
  cache-size: 4096

  # åè®®è®¾ç½®
max-udp-packet-size: 4096
http:
  max-connections-per-host: 16
  connection-pool-size: 256
  idle-timeout: 60
http2:
  max-concurrent-streams: 256
tls:
  fast-open: true
  reuse-session: true
  session-ticket: true
  session-cache-size: 512
  min-version: 1.2
  max-version: 1.3

# åœ°ç†æ•°æ®æ–‡ä»¶
geox-url:
  geoip: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip.dat
  geosite: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat
  mmdb: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country.mmdb
  asn: https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb

geodata-mode: true
geodata-loader: memconservative
geoip-maxmind-compatibility: true

# Sniffer é…ç½®ä¼˜åŒ–
sniffer:
  enable: true
  force-dns-mapping: true
  override-destination: true
  sniffing: [tls, http]
  port-whitelist: [80, 443]
  skip-domain:
    - '*.cn'
    - '*.bilibili.com'
    - '*.taobao.com'
    - '*.qq.com'
  sniff-timeout: 1.0

profile:
  store-selected: true
  store-fake-ip: false
  
